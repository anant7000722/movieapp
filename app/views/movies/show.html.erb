<div class="panel panel-default">
  <div class="panel-body">
    <div class="row">
      <div class="col-md-4">
        <img style = "width: 300px;height: 400px;" alt="<% @movies.title %>" src="<%= @movies.image_url %>" class="img-thumbnail title-show" />
      </div>
         
        
        
        <div class="table-responsive">
          <table class="table">
            <tbody>
              <tr>
                <td><strong>Title:</strong></td>
                <td><%= @movies.title + " " + "(#{@movies.year})"%> <%= image_tag 'rating.png' ,class: "rating-show-image"%><p class= "rating-show"> <%= @movies.rating %></p></td>
              </tr>
              <tr>
                <td><strong>Genre:</strong></td>
                <td><%= @movies.genre %></td>
              </tr>
              <tr>
                <td><strong>Plot:</strong></td>
                <td><%= @movies.plot %></td>
              </tr>
              
              <tr>
                <td><strong>Cast:</strong></td>
                <td><%= @movies.cast %></td>
              </tr>
              
            </tbody>
          </table>
        </div>
    </div>
  </div>
</div>
<div class = "col-md-12">
  
    

  <div class = "col-md-7 col-md-offset-1 well" >
     <h3>Reviews</h3>  
        <% if @reviews.blank? %>
          <h3>No reviews Would you like to add </h3>
        <% else %>
          <% @reviews.each do |review| %>
            <div class = "reviews" >
              <p><%= review.comment %></p>
            </div>
          <% end %>
          <button type="button" class="btn btn-success" data-toggle="modal" data-target="#myModal">More review</button>
        <% end %>
        <h1>New Review</h1>
          <%= render partial:'reviews/form', locals: {reviews: @reviews} %>
  </div>
  
  <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <h4>Top 10 list of <%= @movies.genre%></h4>
            </h3>
          </div>
          <div class="panel-body table-responsive">
            
              <table class="table">
                
                <thead>
                  <tr>
                    <th>
                      #
                    </th>
                    <th>
                      Name
                    </th>
                    <th>
                      Genre
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <% @movies_sorted.each do |movie| %>
                    <% if movie.genre == @movies.genre %>
                      <tr>
                        <td>
                           <%= movie.id %>
                        </td>
                        <td>
                          <a href= "<%= movie_path(movie.id)%>", style = "color:blue" >
                          <%= movie.title %>
                        </a>
                        </td>
                        <td>
                          <%= movie.genre %>
                        </td>
                      </tr>
                   
                    <% end %>
                  <% end %>
                </tbody>
              </table>
            
          </div>
        </div>
      
  </div>
</div>
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Reviews</h4>
        </div>
        <div class="modal-body">
           <% @reviews_for_modal.each do |review| %>
            <div class = "reviews" >
              <p><%= review.comment %></p>

            </div>

          <% end %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>



<script>
  $('.star-rating').raty({
    path: '/assets',
    readOnly: true,
    score: function() {
      return $(this).attr('data-score');

    }
  });
</script>
